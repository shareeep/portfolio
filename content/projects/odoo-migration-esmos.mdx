---
title: ESMOS - A SaaS to IaaS Migration
description: A migration project leveraging Azure Web Services to improve uptime and data management.
image: /images/projects/blog-post-3.jpg
date: "2025-05-14"
authors:
  - shariff-rashid
---
# An Infrastructure Migration Project using Azure with Kubernetes

> A Change Management project demonstrating ITIL alignment, technical implementation on Azure, and successful migration of a SaaS-based meal ordering app to a resilient, scalable Azure IaaS setup for healthcare industry needs.

## 🧠 Overview

Everyday Sustainable Meals Ordering System (ESMOS) is a subscription-based business committed to delivering fresh, gourmet-quality meals crafted from sustainable source ingredients. 

It is also a play on the module name ESM (Enterprise Solutions Management) and is a fictional company.

This project was conducted over multiple weeks as part of our IS214 (ESM) coursework. It involved proposing, managing, and executing a complete infrastructure change from an Odoo SaaS platform to an Azure-based IaaS deployment using DevSecOps and ITIL practices.


- **Original Setup:** Odoo SaaS  
- **New Setup:** Azure AKS, PostgreSQL, Azure Functions, Prometheus + Grafana  
- **Use Case:** Meal planning system for 10,000+ users  
- **Project Goals:**
  - Improve scalability and control
  - Enhance security and compliance
  - Reduce infrastructure costs
  - Support up to 10000 users daily and 100 concurrent sessions

---

## 🔁 Project Phases

### 1. Change Proposal

We began by drafting a Change Proposal outlining:
- Key justifications: scalability, security, and resilience
- Risk analysis: security vulnerabilities, data breaches
- Cost comparison: S$0.20/user (SaaS) → S$0.12/user (Azure IaaS)
- Deployment plan using Terraform, YAML, and Azure CLI

📷 **[Insert Image Placeholder: Proposed System Architecture Diagram]**


---

### 2. Mid-Process Change Management Check-In

Presented our updated progress and stakeholder communications, including:
- Jira ticket lifecycle for tracking
- Communication matrix (internal & external)
- Migration schedule & timeline
- Stakeholder approvals (CAB, Change Manager, CIO)

📷 **[Insert Image Placeholder: Proposed Timeline]**
📷 **[Insert Image Placeholder: Jira Ticket Snapshot]**  
📷 **[Insert Image Placeholder: Communication Matrix Chart]**

---

### 3. Final Presentation

Final results and lessons learned were presented, highlighting:
- Infrastructure setup (AKS, PostgreSQL, Azure Function for GenAI surveys)
- YAML-based deployment pipeline
- DevSecOps measures: TLS, RBAC, NSGs, monitoring
- Cost reduction of over **40%**
- Load testing success (50 concurrent users, 0% error rate)

📷 **[Insert Image Placeholder: Azure Monitoring Dashboard (Grafana)]**  
📷 **[Insert Image Placeholder: Security Architecture and DevSecOps Layers]**

---

## 🛠️ Technical Stack

| Component              | Tool/Service Used                        |
|------------------------|------------------------------------------|
| Container Orchestration | Azure Kubernetes Service (AKS)          |
| Database               | Azure PostgreSQL Flexible Server         |
| Monitoring             | Prometheus + Grafana, BetterStack, Azure Monitoring (Basic)|
| GenAI Feature          | Azure Functions + Azure OpenAI           |
| Infrastructure Setup   | K8s YAML Config Files, Azure CLI         |
| Load Testing           | Locust                                   |

---

## 🔐 Security & Compliance

- **TLS Encryption:** Cert Manager + Let’s Encrypt  
- **Access Control:** RBAC, NSG rules, AppArmor profiles  
- **Observability:** Real-time alerts, metrics via Better Stack + Grafana  
- **Compliance Ready:** Aligns with Singapore’s PDPA requirements  


## 🔍 Behind the Scenes – Technical Narrative

> “Moving from SaaS to IaaS wasn’t plug-and-play…”

We took extra steps to ensure that we were prioritising efficiency, as well as a realistic workflow. Some highlights include:

- **Version-controlled experiments:** Every manifest change pushed to Git, enabling quick bisects when deployments broke.  
- **Kubernetes from scratch:** Opted for Azure CLI + YAML over Helm/IaC frameworks for rapid iteration and learning AKS internals, and less focus on the additional tool of Helm, especially as we were uncertain of costs outcomes if done poorly (we had a budget of $100 Azure credits).  
- **DNS & WAF headache:** Free nip.io wildcard DNS conflicted with ModSecurity side-car; reversing our progress could have given us the answer but we stuck to what was working. Looking back, with a full team available we could have experimented further. 
- **Session-affinity surprise:** HPA (Horizontal Pod Autoscaling) scaled pods, but user carts dropped on refresh. Added cookie-based sticky sessions. Additionally, we had to add a readiness delay for each pod when the system scaled, so that It would not trigger users to the Odoo setup page as it was still loading data.  

---

## 💡 Reflections & Lessons Learned

- Emphasised **business-first change design** rather than a generic lift-and-shift  
- Deferred non-critical security tools (WAF) to ensure timely deployment  
- Jira + Slack allowed **full traceability** across changes  
- Clear role definitions and version-controlled configs made the process auditable and reproducible  

---

## 📊 Outcome Highlights

- ✅ **Zero post-migration bugs**  
- 🔄 **Rollback readiness and backup validation**  
- 📉 **Cost reduced from $2000/month to $1227.76/month**  
- 🧪 **All tests passed on load, memory, and CPU metrics**  
- 📈 **Smooth migration with less than 4 hours of downtime**  